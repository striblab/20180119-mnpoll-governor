!function e(a,l,n){function r(t,u){if(!l[t]){if(!a[t]){var i="function"==typeof require&&require;if(!u&&i)return i(t,!0);if(s)return s(t,!0);throw new Error("Cannot find module '"+t+"'")}var c=l[t]={exports:{}};a[t][0].call(c.exports,function(e){var l=a[t][1][e];return r(l||e)},c,c.exports,e,a,l,n)}return l[t].exports}for(var s="function"==typeof require&&require,t=0;t<n.length;t++)r(n[t]);return r}({1:[function(e,a,l){d3.json("./data/polls.json",function(e,a){function l(e,a){return d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).rollup(function(e){return e.length}).entries(data).length}function n(e,a){for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&$(a).html("<div class='question'>"+data[i].question+"</div")}function r(e,a){var l="";for(i=0;i<data.length;i++)if(data[i].tag==e&&"main"==data[i].demographic){var n=data[i].answer6;"gov2"==e&&(n="Mary G. Stephens"),"null"!=data[i].answer1&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer1+"</div></div>"),"null"!=data[i].answer2&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[1]+"'></div> <div class='legendText'>"+data[i].answer2+"</div></div>"),"null"!=data[i].answer3&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[2]+"'></div> <div class='legendText'>"+data[i].answer3+"</div></div>"),"null"!=data[i].answer4&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[3]+"'></div> <div class='legendText'>"+data[i].answer4+"</div></div>"),"null"!=data[i].answer5&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[4]+"'></div> <div class='legendText'>"+data[i].answer5+"</div></div>"),"null"!=data[i].answer6&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[5]+"'></div> <div class='legendText'>"+n+"</div></div>"),"null"!=data[i].answer7&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[6]+"'></div> <div class='legendText'>"+data[i].answer7+"</div></div>"),"null"!=data[i].answer8&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[7]+"'></div> <div class='legendText'>"+data[i].answer8+"</div></div>"),"null"!=data[i].answer9&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[8]+"'></div> <div class='legendText'>"+data[i].answer9+"</div></div>"),"null"!=data[i].answer10&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[9]+"'></div> <div class='legendText'>"+data[i].answer10+"</div></div>"),"null"!=data[i].answer11&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[10]+"'></div> <div class='legendText'>"+data[i].answer11+"</div></div>"),"null"!=data[i].answer12&&(l+="<div class='legendEntry'><div class='legendBlock' style='background-color:"+colors[11]+"'></div> <div class='legendText'>"+data[i].answer12+"</div></div>")}$(".legendBox").html(l)}function s(e,a){$(a).append("<div class='icon'><img src='img/"+e.toLowerCase()+".png' /></div><div class='category'>"+e+"</div>")}function t(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=r[1].values[0],t=e+"_"+n;$(l).append("<div rel='"+a+"' id='"+t+"' class='chartLabel'>"+a+"</div>"),$(l).append("<div rel='"+a+"' id='"+t+"' class='chart'><svg></svg></div>");var u;nv.addGraph(function(){u=nv.models.multiBarHorizontalChart().x(function(e){return e.label}).y(function(e){return e.value}).margin({top:10,right:20,bottom:15,left:20}).color(colors).stacked(!0).showValues(!1).showLegend(!1).showControls(!1),u.yAxis.tickFormat(d3.format("%")),d3.select("#"+t+" svg").datum(c).transition().duration(500).call(u),nv.utils.windowResize(u.update);var e=$(document);e.width();return u});var i=$("#chartBox");i.width();if("null"!=s.answer12)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]},{key:s.answer12,values:[{label:a,value:Number(s.answer12_pct)}]}];else if("null"!=s.answer11)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]}];else if("null"!=s.answer10)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]}];else if("null"!=s.answer9)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]}];else if("null"!=s.answer8)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]}];else if("null"!=s.answer7)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]}];else if("null"!=s.answer6)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]}];else if("null"!=s.answer5)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]}];else if("null"!=s.answer4)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]}];else var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]}]}function u(e){var a,l,n=0,r=0;for(i=0;i<data.length;i++)if(data[i].tag==e&&"Total"==data[i].demographic)if("gov3"==e){var n=Number(100*data[i].answer2_pct),r=Number(100*data[i].answer3_pct);a=data[i].answer2,l=data[i].answer3,$(".forNum").addClass("neutral1"),$(".againstNum").addClass("neutral2")}else if("gov2"==e){var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer7_pct);a=data[i].answer1,l=data[i].answer7,$(".forNum").addClass("gop1"),$(".againstNum").addClass("gop2")}else if("gov1"==e){var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer8_pct);a=data[i].answer1,l=data[i].answer8,$(".forNum").addClass("dem1"),$(".againstNum").addClass("dem2")}else{var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer2_pct);a=data[i].answer1,l=data[i].answer2}$(".forLabel").html(""+a),$(".againstLabel").html(""+l),$({countNum:$(".for").text()}).animate({countNum:Math.round(n)},{duration:1e3,easing:"linear",step:function(){$(".for").text(Math.floor(this.countNum))},complete:function(){$(".for").text(this.countNum)}}),$({countNum:$(".for").text()}).animate({countNum:Math.round(r)},{duration:1e3,easing:"linear",step:function(){$(".against").text(Math.floor(this.countNum))},complete:function(){$(".against").text(this.countNum)}})}function c(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=e+"_"+n+"Table";$(l).append("<div rel='"+a+"' id='"+s+"' class='table'></div>");var t=d3.select("#"+s).append("table"),u=t.append("thead"),i=t.append("tbody"),c=[],d=[],o=r[1].values[0],v=[];v[0]=null,c[0]="Category";var w=o.answer3;"gov3"==e&&(w="Jobs/Econ"),"null"!=o.answer1&&(c[1]=o.answer1),"null"!=o.answer2&&(c[2]=o.answer2),"null"!=o.answer3&&(c[3]=w),"null"!=o.answer4&&(c[4]=o.answer4),"null"!=o.answer5&&(c[5]=o.answer5),"null"!=o.answer6&&(c[6]=o.answer6),"null"!=o.answer7&&(c[7]=o.answer7),"null"!=o.answer8&&(c[8]=o.answer8),"null"!=o.answer9&&(c[9]=o.answer9),"null"!=o.answer10&&(c[10]=o.answer10),"null"!=o.answer11&&(c[11]=o.answer11),"null"!=o.answer12&&(c[12]=o.answer12),d[0]=a,"null"!=o.answer1&&(d[1]=o.answer1_pct),"null"!=o.answer2&&(d[2]=o.answer2_pct),"null"!=o.answer3&&(d[3]=o.answer3_pct),"null"!=o.answer4&&(d[4]=o.answer4_pct),"null"!=o.answer5&&(d[5]=o.answer5_pct),"null"!=o.answer6&&(d[6]=o.answer6_pct),"null"!=o.answer7&&(d[7]=o.answer7_pct),"null"!=o.answer8&&(d[8]=o.answer8_pct),"null"!=o.answer9&&(d[9]=o.answer9_pct),"null"!=o.answer10&&(d[10]=o.answer10_pct),"null"!=o.answer11&&(d[11]=o.answer11_pct),"null"!=o.answer12&&(d[12]=o.answer12_pct),"Age 18-34"!=a&&"< $50,000"!=a&&"Men"!=a&&"Democrat"!=a&&"Hennepin & Ramsey"!=a&&"High School/Some College"!=a||u.append("tr").attr("class","headers").selectAll("th").data(c).enter().append("th").text(function(e){return e});var b=i.selectAll("tr").data(v).enter().append("tr");b.selectAll("td").data(d).enter().append("td").text(function(e){return isNaN(e)?e:d3.format("%")(e)});$(s+" .headers:not(:first)").hide()}data=a.polls;var d=window.location.href,o=/poll=([^&]+)/.exec(d)[1],v=o||"test",w="test";d3.select(".dropdown").selectAll(".list").data(data).enter().append("div").attr("class","list").html(function(e){if(e.tag!=w)return w=e.tag,"<a href='index.html?poll='"+e.tag+" class='loadLink'><li class='card' data='"+e.tag+"''>"+e.year+" | "+e.question+"</li></a>"}),$(document).ready(function(){$(".loadLink").each(function(){$(this).attr("href","index.html?poll="+$(this).find("li").attr("data"))}),$(".loadLink").click(function(){window.location.href=$(this).attr("href")})});var b=v;colors="gov1"==b?["#084594","#2171b5","#4292c6","#6baed6","#9ecae1","#c6dbef","#deebf7","#f7fbff","#f7fbff"]:"gov2"==b?["#99000d","#cb181d","#ef3b2c","#fb6a4a","#fc9272","#fcbba1","#fee5d9"]:["#000000","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0","#bcbddc","#756bb1","#4a1486"],function(e,a,i,d){$(a).html(""),$(i).html(""),$(d).html(""),n(e,"#question"),l(e,"Total")>1&&t(e,"Total",a,0),(l(e,"Democrat")>1||l(e,"Republican")>1)&&s("Party",i),l(e,"Democrat")>1&&(t(e,"Democrat",i,1),c(e,"Democrat",i,1)),l(e,"Republican")>1&&(t(e,"Republican",i,2),c(e,"Republican",i,2)),l(e,"Independent")>1&&(t(e,"Independent",i,3),c(e,"Independent",i,3)),l(e,"Other/None")>1&&(t(e,"Other/None",i,4),c(e,"Other/None",i,4)),l(e,"Trump voters")>1&&s("Voters",i),l(e,"Trump voters")>1&&(t(e,"Trump voters",i,26),c(e,"Trump voters",i,26)),l(e,"Clinton voters")>1&&(t(e,"Clinton voters",i,27),c(e,"Clinton voters",i,27)),l(e,"Other/Did not vote")>1&&(t(e,"Other/Did not vote",i,28),c(e,"Other/Did not vote",i,28)),l(e,"Men")>1&&s("Gender",i),l(e,"Men")>1&&(t(e,"Men",i,5),c(e,"Men",i,5)),l(e,"Women")>1&&(t(e,"Women",i,6),c(e,"Women",i,6)),l(e,"Hennepin & Ramsey")>1&&s("Region",i),l(e,"Hennepin & Ramsey")>1&&(t(e,"Hennepin & Ramsey",i,9),c(e,"Hennepin & Ramsey",i,9)),l(e,"Metro Suburbs")>1&&(t(e,"Metro Suburbs",i,10),c(e,"Metro Suburbs",i,10)),l(e,"Rest of State")>1&&(t(e,"Rest of State",i,11),c(e,"Rest of State",i,11)),l(e,"Northern Minnesota")>1&&(t(e,"Northern Minnesota",i,22),c(e,"Northern Minnesota",i,22)),l(e,"Southern Minnesota")>1&&(t(e,"Southern Minnesota",i,23),c(e,"Southern Minnesota",i,23)),l(e,"< $50,000")>1&&s("Income",d),l(e,"< $50,000")>1&&(t(e,"< $50,000",d,7),c(e,"< $50,000",d,7)),l(e,"> $50,000")>1&&(t(e,"> $50,000",d,8),c(e,"> $50,000",d,8)),l(e,"Age 18-34")>1&&s("Age",d),l(e,"Age 18-34")>1&&(t(e,"Age 18-34",d,12),c(e,"Age 18-34",d,12)),l(e,"Age 35-49")>1&&(t(e,"Age 35-49",d,13),c(e,"Age 35-49",d,13)),l(e,"Age 50-64")>1&&(t(e,"Age 50-64",d,14),c(e,"Age 50-64",d,14)),l(e,"Age 65+")>1&&(t(e,"Age 65+",d,15),c(e,"Age 65+",d,15)),l(e,"White")>1&&s("Race",i),l(e,"White")>1&&(t(e,"White",i,16),c(e,"White",i,16)),l(e,"Black")>1&&(t(e,"Black",i,17),c(e,"Black",i,17)),l(e,"Hispanic")>1&&(t(e,"Hispanic",i,18),c(e,"Hispanic",i,18)),l(e,"Asian")>1&&(t(e,"Asian",i,19),c(e,"Asian",i,19)),l(e,"Native")>1&&(t(e,"Native",i,20),c(e,"Native",i,20)),l(e,"Other")>1&&(t(e,"Other",i,21),c(e,"Other",i,21)),l(e,"High School/Some College")>1&&s("Education",d),l(e,"High School/Some College")>1&&(t(e,"High School/Some College",d,24),c(e,"High School/Some College",d,24)),l(e,"College Graduate")>1&&(t(e,"College Graduate",d,25),c(e,"College Graduate",d,25)),u(e),r(e,"#legendBox")}(b,"#chartBox0","#chartBox1","#chartBox2"),$(".switchIcon").on("click",function(){$(".switchIcon").removeClass("thisView"),$(this).addClass("thisView"),$(".chart, .chartLabel, .table").hide(),$("."+$(this).attr("view")).show(),"chart"==$(this).attr("view")&&$(".chartLabel").show(),$("#chartBox0 .chart").show(),$("#chartBox0 .chartLabel").show()})})},{}]},{},[1]);