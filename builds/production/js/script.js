!function e(a,l,n){function r(t,u){if(!l[t]){if(!a[t]){var i="function"==typeof require&&require;if(!u&&i)return i(t,!0);if(s)return s(t,!0);throw new Error("Cannot find module '"+t+"'")}var o=l[t]={exports:{}};a[t][0].call(o.exports,function(e){var l=a[t][1][e];return r(l||e)},o,o.exports,e,a,l,n)}return l[t].exports}for(var s="function"==typeof require&&require,t=0;t<n.length;t++)r(n[t]);return r}({1:[function(e,a,l){d3.json("./data/polls.json",function(e,a){function l(e,a){return d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).rollup(function(e){return e.length}).entries(data).length}function n(e,a){for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&$(a).html("<div class='question'>"+data[i].question+"</div")}function r(e,a){var l="";for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&("null"!=data[i].answer1&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer1+"</div>"),"null"!=data[i].answer2&&(l+="<div class='legendBlock' style='background-color:"+colors[1]+"'></div> <div class='legendText'>"+data[i].answer2+"</div>"),"null"!=data[i].answer3&&(l+="<div class='legendBlock' style='background-color:"+colors[2]+"'></div> <div class='legendText'>"+data[i].answer3+"</div>"),"null"!=data[i].answer4&&(l+="<div class='legendBlock' style='background-color:"+colors[3]+"'></div> <div class='legendText'>"+data[i].answer4+"</div>"),"null"!=data[i].answer5&&(l+="<div class='legendBlock' style='background-color:"+colors[4]+"'></div> <div class='legendText'>"+data[i].answer5+"</div>"),"null"!=data[i].answer6&&(l+="<div class='legendBlock' style='background-color:"+colors[5]+"'></div> <div class='legendText'>"+data[i].answer6+"</div>"),"null"!=data[i].answer7&&(l+="<div class='legendBlock' style='background-color:"+colors[6]+"'></div> <div class='legendText'>"+data[i].answer7+"</div>"),"null"!=data[i].answer8&&(l+="<div class='legendBlock' style='background-color:"+colors[7]+"'></div> <div class='legendText'>"+data[i].answer8+"</div>"),"null"!=data[i].answer9&&(l+="<div class='legendBlock' style='background-color:"+colors[8]+"'></div> <div class='legendText'>"+data[i].answer9+"</div>"),"null"!=data[i].answer10&&(l+="<div class='legendBlock' style='background-color:"+colors[9]+"'></div> <div class='legendText'>"+data[i].answer10+"</div>"),"null"!=data[i].answer11&&(l+="<div class='legendBlock' style='background-color:"+colors[10]+"'></div> <div class='legendText'>"+data[i].answer11+"</div>"),"null"!=data[i].answer12&&(l+="<div class='legendBlock' style='background-color:"+colors[11]+"'></div> <div class='legendText'>"+data[i].answer12+"</div>"));$(".legendBox").html(l)}function s(e,a){$(a).append("<div class='icon'><img src='img/"+e.toLowerCase()+".png' /></div><div class='category'>"+e+"</div>")}function t(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=r[1].values[0],t=e+"_"+n;$(l).append("<div rel='"+a+"' id='"+t+"' class='chartLabel'>"+a+"</div>"),$(l).append("<div rel='"+a+"' id='"+t+"' class='chart'><svg></svg></div>");var u;nv.addGraph(function(){u=nv.models.multiBarHorizontalChart().x(function(e){return e.label}).y(function(e){return e.value}).margin({top:10,right:20,bottom:15,left:20}).color(colors).stacked(!0).showValues(!1).showLegend(!1).showControls(!1),u.yAxis.tickFormat(d3.format("%")),d3.select("#"+t+" svg").datum(o).transition().duration(500).call(u),nv.utils.windowResize(u.update);var e=$(document);e.width();return u});var i=$("#chartBox");i.width();if("null"!=s.answer12)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]},{key:s.answer12,values:[{label:a,value:Number(s.answer12_pct)}]}];else if("null"!=s.answer11)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]}];else if("null"!=s.answer10)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]}];else if("null"!=s.answer9)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]}];else if("null"!=s.answer8)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]}];else if("null"!=s.answer7)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]}];else if("null"!=s.answer6)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]}];else if("null"!=s.answer5)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]}];else if("null"!=s.answer4)var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]}];else var o=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]}]}function u(e){var a,l,n=0,r=0;for(i=0;i<data.length;i++)if(data[i].tag==e&&"Total"==data[i].demographic)if("gov3"==e){var n=Number(100*data[i].answer2_pct),r=Number(100*data[i].answer3_pct);a=data[i].answer2,l=data[i].answer3,$(".forNum").addClass("neutral1"),$(".againstNum").addClass("neutral2")}else if("gov2"==e){var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer6_pct);a=data[i].answer1,l=data[i].answer6,$(".forNum").addClass("gop1"),$(".againstNum").addClass("gop2")}else if("gov1"==e){var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer8_pct);a=data[i].answer1,l=data[i].answer8,$(".forNum").addClass("dem1"),$(".againstNum").addClass("dem2")}else{var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer2_pct);a=data[i].answer1,l=data[i].answer2}$(".forLabel").html(""+a),$(".againstLabel").html(""+l),$({countNum:$(".for").text()}).animate({countNum:Math.round(n)},{duration:1e3,easing:"linear",step:function(){$(".for").text(Math.floor(this.countNum))},complete:function(){$(".for").text(this.countNum)}}),$({countNum:$(".for").text()}).animate({countNum:Math.round(r)},{duration:1e3,easing:"linear",step:function(){$(".against").text(Math.floor(this.countNum))},complete:function(){$(".against").text(this.countNum)}})}function o(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=e+"_"+n+"Table";$(l).append("<div rel='"+a+"' id='"+s+"' class='table'></div>");var t=d3.select("#"+s).append("table"),u=t.append("thead"),i=t.append("tbody"),o=[],c=[],d=r[1].values[0],w=[];w[0]=null,o[0]="Category","null"!=d.answer1&&(o[1]=d.answer1),"null"!=d.answer2&&(o[2]=d.answer2),"null"!=d.answer3&&(o[3]=d.answer3),"null"!=d.answer4&&(o[4]=d.answer4),"null"!=d.answer5&&(o[5]=d.answer5),"null"!=d.answer6&&(o[6]=d.answer6),"null"!=d.answer7&&(o[7]=d.answer7),"null"!=d.answer8&&(o[8]=d.answer8),"null"!=d.answer9&&(o[9]=d.answer9),"null"!=d.answer10&&(o[10]=d.answer10),"null"!=d.answer11&&(o[11]=d.answer11),"null"!=d.answer12&&(o[12]=d.answer12),c[0]=a,"null"!=d.answer1&&(c[1]=d.answer1_pct),"null"!=d.answer2&&(c[2]=d.answer2_pct),"null"!=d.answer3&&(c[3]=d.answer3_pct),"null"!=d.answer4&&(c[4]=d.answer4_pct),"null"!=d.answer5&&(c[5]=d.answer5_pct),"null"!=d.answer6&&(c[6]=d.answer6_pct),"null"!=d.answer7&&(c[7]=d.answer7_pct),"null"!=d.answer8&&(c[8]=d.answer8_pct),"null"!=d.answer9&&(c[9]=d.answer9_pct),"null"!=d.answer10&&(c[10]=d.answer10_pct),"null"!=d.answer11&&(c[11]=d.answer11_pct),"null"!=d.answer12&&(c[12]=d.answer12_pct),"Age 18-34"!=a&&"< $50,000"!=a&&"Men"!=a&&"Democrat"!=a&&"Hennepin & Ramsey"!=a&&"High School/Some College"!=a||u.append("tr").attr("class","headers").selectAll("th").data(o).enter().append("th").text(function(e){return e});var v=i.selectAll("tr").data(w).enter().append("tr");v.selectAll("td").data(c).enter().append("td").text(function(e){return isNaN(e)?e:d3.format("%")(e)});$(s+" .headers:not(:first)").hide()}data=a.polls;var c=window.location.href,d=/poll=([^&]+)/.exec(c)[1],w=d||"test",v="test";d3.select(".dropdown").selectAll(".list").data(data).enter().append("div").attr("class","list").html(function(e){if(e.tag!=v)return v=e.tag,"<a href='index.html?poll='"+e.tag+" class='loadLink'><li class='card' data='"+e.tag+"''>"+e.year+" | "+e.question+"</li></a>"}),$(document).ready(function(){$(".loadLink").each(function(){$(this).attr("href","index.html?poll="+$(this).find("li").attr("data"))}),$(".loadLink").click(function(){window.location.href=$(this).attr("href")})});var b=w;colors="gov1"==b?["#084594","#2171b5","#4292c6","#6baed6","#9ecae1","#c6dbef","#deebf7","#f7fbff","#f7fbff"]:"gov2"==b?["#a50f15","#de2d26","#fb6a4a","#fc9272","#fcbba1","#fee5d9"]:["#000000","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0","#bcbddc","#756bb1","#4a1486"],function(e,a,i,c){$(a).html(""),$(i).html(""),$(c).html(""),n(e,"#question"),l(e,"Total")>1&&t(e,"Total",a,0),(l(e,"Democrat")>1||l(e,"Republican")>1)&&s("Party",i),l(e,"Democrat")>1&&(t(e,"Democrat",i,1),o(e,"Democrat",i,1)),l(e,"Republican")>1&&(t(e,"Republican",i,2),o(e,"Republican",i,2)),l(e,"Independent")>1&&(t(e,"Independent",i,3),o(e,"Independent",i,3)),l(e,"Other/None")>1&&(t(e,"Other/None",i,4),o(e,"Other/None",i,4)),l(e,"Trump voters")>1&&s("Voters",i),l(e,"Trump voters")>1&&(t(e,"Trump voters",i,26),o(e,"Trump voters",i,26)),l(e,"Clinton voters")>1&&(t(e,"Clinton voters",i,27),o(e,"Clinton voters",i,27)),l(e,"Other/Did not vote")>1&&(t(e,"Other/Did not vote",i,28),o(e,"Other/Did not vote",i,28)),l(e,"Men")>1&&s("Gender",i),l(e,"Men")>1&&(t(e,"Men",i,5),o(e,"Men",i,5)),l(e,"Women")>1&&(t(e,"Women",i,6),o(e,"Women",i,6)),l(e,"Hennepin & Ramsey")>1&&s("Region",i),l(e,"Hennepin & Ramsey")>1&&(t(e,"Hennepin & Ramsey",i,9),o(e,"Hennepin & Ramsey",i,9)),l(e,"Metro Suburbs")>1&&(t(e,"Metro Suburbs",i,10),o(e,"Metro Suburbs",i,10)),l(e,"Rest of State")>1&&(t(e,"Rest of State",i,11),o(e,"Rest of State",i,11)),l(e,"Northern Minnesota")>1&&(t(e,"Northern Minnesota",i,22),o(e,"Northern Minnesota",i,22)),l(e,"Southern Minnesota")>1&&(t(e,"Southern Minnesota",i,23),o(e,"Southern Minnesota",i,23)),l(e,"< $50,000")>1&&s("Income",c),l(e,"< $50,000")>1&&(t(e,"< $50,000",c,7),o(e,"< $50,000",c,7)),l(e,"> $50,000")>1&&(t(e,"> $50,000",c,8),o(e,"> $50,000",c,8)),l(e,"Age 18-34")>1&&s("Age",c),l(e,"Age 18-34")>1&&(t(e,"Age 18-34",c,12),o(e,"Age 18-34",c,12)),l(e,"Age 35-49")>1&&(t(e,"Age 35-49",c,13),o(e,"Age 35-49",c,13)),l(e,"Age 50-64")>1&&(t(e,"Age 50-64",c,14),o(e,"Age 50-64",c,14)),l(e,"Age 65+")>1&&(t(e,"Age 65+",c,15),o(e,"Age 65+",c,15)),l(e,"White")>1&&s("Race",i),l(e,"White")>1&&(t(e,"White",i,16),o(e,"White",i,16)),l(e,"Black")>1&&(t(e,"Black",i,17),o(e,"Black",i,17)),l(e,"Hispanic")>1&&(t(e,"Hispanic",i,18),o(e,"Hispanic",i,18)),l(e,"Asian")>1&&(t(e,"Asian",i,19),o(e,"Asian",i,19)),l(e,"Native")>1&&(t(e,"Native",i,20),o(e,"Native",i,20)),l(e,"Other")>1&&(t(e,"Other",i,21),o(e,"Other",i,21)),l(e,"High School/Some College")>1&&s("Education",c),l(e,"High School/Some College")>1&&(t(e,"High School/Some College",c,24),o(e,"High School/Some College",c,24)),l(e,"College Graduate")>1&&(t(e,"College Graduate",c,25),o(e,"College Graduate",c,25)),u(e),r(e,"#legendBox")}(b,"#chartBox0","#chartBox1","#chartBox2"),$(".switchIcon").on("click",function(){$(".switchIcon").removeClass("thisView"),$(this).addClass("thisView"),$(".chart, .chartLabel, .table").hide(),$("."+$(this).attr("view")).show(),"chart"==$(this).attr("view")&&$(".chartLabel").show(),$("#chartBox0 .chart").show(),$("#chartBox0 .chartLabel").show()})})},{}]},{},[1]);